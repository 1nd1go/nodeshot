(function(c,j){function k(a,b){var d=a.nodeName.toLowerCase();if("area"===d){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!=="map")return false;a=c("img[usemap=#"+d+"]")[0];return!!a&&l(a)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||b:b)&&l(a)}function l(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.16",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=
this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,
"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(a.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(a,b){function d(f,g,m,n){c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,true))||0;if(m)g-=parseFloat(c.curCSS(f,"border"+this+"Width",true))||0;if(n)g-=parseFloat(c.curCSS(f,"margin"+this,true))||0});return g}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,
outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){if(f===j)return i["inner"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+"px")})};c.fn["outer"+b]=function(f,g){if(typeof f!=="number")return i["outer"+b].call(this,f);return this.each(function(){c(this).css(h,d(this,f,true,g)+"px")})}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){return k(a,!isNaN(c.attr(a,"tabindex")))},tabbable:function(a){var b=c.attr(a,
"tabindex"),d=isNaN(b);return(d||b>=0)&&k(a,!d)}});c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&
a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==="hidden")return false;b=b&&b==="left"?"scrollLeft":"scrollTop";var d=false;if(a[b]>0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&
c.ui.isOverAxis(b,e,i)}})}})(jQuery);(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)try{b(d).triggerHandler("remove")}catch(e){}k(a)}}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(d){}});return l.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=
function(h){return!!b.data(h,a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):
d;if(e&&d.charAt(0)==="_")return h;e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=
b.extend(true,{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===j)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
c);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
(function(b){var d=false;b(document).mouseup(function(){d=false});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(c){return a._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(true===b.data(c.target,a.widgetName+".preventClickEvent")){b.removeData(c.target,a.widgetName+".preventClickEvent");c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(a){if(!d){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var c=this,f=a.which==1,g=typeof this.options.cancel=="string"&&a.target.nodeName?b(a.target).closest(this.options.cancel).length:false;if(!f||g||!this._mouseCapture(a))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=
this._mouseStart(a)!==false;if(!this._mouseStarted){a.preventDefault();return true}}true===b.data(a.target,this.widgetName+".preventClickEvent")&&b.removeData(a.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(e){return c._mouseMove(e)};this._mouseUpDelegate=function(e){return c._mouseUp(e)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return d=true}},_mouseMove:function(a){if(b.browser.msie&&
!(document.documentMode>=9)&&!a.button)return this._mouseUp(a);if(this._mouseStarted){this._mouseDrag(a);return a.preventDefault()}if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==false)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=
false;a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",true);this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(c){c.ui=c.ui||{};var n=/left|center|right/,o=/top|center|bottom/,t=c.fn.position,u=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return t.apply(this,arguments);b=c.extend({},b);var a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),e=b.offset?b.offset.split(" "):[0,0],h,k,j;if(d.nodeType===9){h=a.width();k=a.height();j={top:0,left:0}}else if(d.setTimeout){h=a.width();k=a.height();j={top:a.scrollTop(),left:a.scrollLeft()}}else if(d.preventDefault){b.at="left top";h=k=0;j={top:b.of.pageY,
left:b.of.pageX}}else{h=a.outerWidth();k=a.outerHeight();j=a.offset()}c.each(["my","at"],function(){var f=(b[this]||"").split(" ");if(f.length===1)f=n.test(f[0])?f.concat(["center"]):o.test(f[0])?["center"].concat(f):["center","center"];f[0]=n.test(f[0])?f[0]:"center";f[1]=o.test(f[1])?f[1]:"center";b[this]=f});if(g.length===1)g[1]=g[0];e[0]=parseInt(e[0],10)||0;if(e.length===1)e[1]=e[0];e[1]=parseInt(e[1],10)||0;if(b.at[0]==="right")j.left+=h;else if(b.at[0]==="center")j.left+=h/2;if(b.at[1]==="bottom")j.top+=
k;else if(b.at[1]==="center")j.top+=k/2;j.left+=e[0];j.top+=e[1];return this.each(function(){var f=c(this),l=f.outerWidth(),m=f.outerHeight(),p=parseInt(c.curCSS(this,"marginLeft",true))||0,q=parseInt(c.curCSS(this,"marginTop",true))||0,v=l+p+(parseInt(c.curCSS(this,"marginRight",true))||0),w=m+q+(parseInt(c.curCSS(this,"marginBottom",true))||0),i=c.extend({},j),r;if(b.my[0]==="right")i.left-=l;else if(b.my[0]==="center")i.left-=l/2;if(b.my[1]==="bottom")i.top-=m;else if(b.my[1]==="center")i.top-=
m/2;i.left=Math.round(i.left);i.top=Math.round(i.top);r={left:i.left-p,top:i.top-q};c.each(["left","top"],function(s,x){c.ui.position[g[s]]&&c.ui.position[g[s]][x](i,{targetWidth:h,targetHeight:k,elemWidth:l,elemHeight:m,collisionPosition:r,collisionWidth:v,collisionHeight:w,offset:e,my:b.my,at:b.at})});c.fn.bgiframe&&f.bgiframe();f.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=
d>0?b.left-d:Math.max(b.left-a.collisionPosition.left,b.left)},top:function(b,a){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=d>0?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if(a.at[0]!=="center"){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();var g=a.my[0]==="left"?-a.elemWidth:a.my[0]==="right"?a.elemWidth:0,e=a.at[0]==="left"?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=
a.collisionPosition.left<0?g+e+h:d>0?g+e+h:0}},top:function(b,a){if(a.at[1]!=="center"){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();var g=a.my[1]==="top"?-a.elemHeight:a.my[1]==="bottom"?a.elemHeight:0,e=a.at[1]==="top"?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=a.collisionPosition.top<0?g+e+h:d>0?g+e+h:0}}}};if(!c.offset.setOffset){c.offset.setOffset=function(b,a){if(/static/.test(c.curCSS(b,"position")))b.style.position="relative";var d=c(b),
g=d.offset(),e=parseInt(c.curCSS(b,"top",true),10)||0,h=parseInt(c.curCSS(b,"left",true),10)||0;g={top:a.top-g.top+e,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)};c.fn.offset=function(b){var a=this[0];if(!a||!a.ownerDocument)return null;if(b)return this.each(function(){c.offset.setOffset(this,b)});return u.call(this)}}})(jQuery);(function(d){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(a){var b=
this.options;if(this.helper||b.disabled||d(a.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;if(b.iframeFix)d(b.iframeFix===true?"iframe":b.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")});return true},_mouseStart:function(a){var b=this.options;
this.helper=this._createHelper(a);this._cacheHelperProportions();if(d.ui.ddmanager)d.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);b.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,a);return true},
_mouseDrag:function(a,b){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!b){b=this._uiHash();if(this._trigger("drag",a,b)===false){this._mouseUp({});return false}this.position=b.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var b=
false;if(d.ui.ddmanager&&!this.options.dropBehaviour)b=d.ui.ddmanager.drop(this,a);if(this.dropped){b=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===true||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,b)){var c=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,
10),function(){c._trigger("stop",a)!==false&&c._clear()})}else this._trigger("stop",a)!==false&&this._clear();return false},_mouseUp:function(a){this.options.iframeFix===true&&d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,a);return d.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var b=!this.options.handle||
!d(this.options.handle,this.element).length?true:false;d(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==a.target)b=true});return b},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&
a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,
(a.containment=="document"?0:d(window).scrollLeft())+d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:d(window).scrollTop())+(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){a=d(a.containment);var b=a[0];if(b){a.offset();var c=d(b).css("overflow")!=
"hidden";this.containment=[(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0),(parseInt(d(b).css("borderTopWidth"),10)||0)+(parseInt(d(b).css("paddingTop"),10)||0),(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),
10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=a}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName);return{top:b.top+
this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition=="absolute"&&
!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName),e=a.pageX,h=a.pageY;if(this.originalPosition){var g;if(this.containment){if(this.relative_container){g=this.relative_container.offset();g=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+g.left,this.containment[3]+g.top]}else g=this.containment;if(a.pageX-this.offset.click.left<g[0])e=g[0]+this.offset.click.left;
if(a.pageY-this.offset.click.top<g[1])h=g[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>g[2])e=g[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>g[3])h=g[3]+this.offset.click.top}if(b.grid){h=b.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY;h=g?!(h-this.offset.click.top<g[1]||h-this.offset.click.top>g[3])?h:!(h-this.offset.click.top<g[1])?h-b.grid[1]:h+b.grid[1]:h;e=b.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/
b.grid[0])*b.grid[0]:this.originalPageX;e=g?!(e-this.offset.click.left<g[0]||e-this.offset.click.left>g[2])?e:!(e-this.offset.click.left<g[0])?e-b.grid[0]:e+b.grid[0]:e}}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<
526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,b,c){c=c||this._uiHash();d.ui.plugin.call(this,a,[b,c]);if(a=="drag")this.positionAbs=this._convertPositionTo("absolute");return d.Widget.prototype._trigger.call(this,a,b,
c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.extend(d.ui.draggable,{version:"1.8.16"});d.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=d(this).data("draggable"),f=c.options,e=d.extend({},b,{item:c.element});c.sortables=[];d(f.connectToSortable).each(function(){var h=d.data(this,"sortable");if(h&&!h.options.disabled){c.sortables.push({instance:h,shouldRevert:h.options.revert});
h.refreshPositions();h._trigger("activate",a,e)}})},stop:function(a,b){var c=d(this).data("draggable"),f=d.extend({},b,{item:c.element});d.each(c.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;c.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=
false;this.instance._trigger("deactivate",a,f)}})},drag:function(a,b){var c=d(this).data("draggable"),f=this;d.each(c.sortables,function(){this.instance.positionAbs=c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=d(f).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);
this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return b.helper[0]};a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=c.offset.click.top;this.instance.offset.click.left=c.offset.click.left;this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top;
c._trigger("toSortable",a);c.dropped=this.instance.element;c.currentItem=c.element;this.instance.fromOutside=c}this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&
this.instance.placeholder.remove();c._trigger("fromSortable",a);c.dropped=false}})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),b=d(this).data("draggable").options;if(a.css("cursor"))b._cursor=a.css("cursor");a.css("cursor",b.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","opacity",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("opacity"))b._opacity=
a.css("opacity");a.css("opacity",b.opacity)},stop:function(a,b){a=d(this).data("draggable").options;a._opacity&&d(b.helper).css("opacity",a._opacity)}});d.ui.plugin.add("draggable","scroll",{start:function(){var a=d(this).data("draggable");if(a.scrollParent[0]!=document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var b=d(this).data("draggable"),c=b.options,f=false;if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){if(!c.axis||c.axis!=
"x")if(b.overflowOffset.top+b.scrollParent[0].offsetHeight-a.pageY<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop+c.scrollSpeed;else if(a.pageY-b.overflowOffset.top<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop-c.scrollSpeed;if(!c.axis||c.axis!="y")if(b.overflowOffset.left+b.scrollParent[0].offsetWidth-a.pageX<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft+c.scrollSpeed;else if(a.pageX-b.overflowOffset.left<
c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(!c.axis||c.axis!="x")if(a.pageY-d(document).scrollTop()<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()-c.scrollSpeed);else if(d(window).height()-(a.pageY-d(document).scrollTop())<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()+c.scrollSpeed);if(!c.axis||c.axis!="y")if(a.pageX-d(document).scrollLeft()<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()-
c.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()+c.scrollSpeed)}f!==false&&d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(b,a)}});d.ui.plugin.add("draggable","snap",{start:function(){var a=d(this).data("draggable"),b=a.options;a.snapElements=[];d(b.snap.constructor!=String?b.snap.items||":data(draggable)":b.snap).each(function(){var c=d(this),f=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,
width:c.outerWidth(),height:c.outerHeight(),top:f.top,left:f.left})})},drag:function(a,b){for(var c=d(this).data("draggable"),f=c.options,e=f.snapTolerance,h=b.offset.left,g=h+c.helperProportions.width,n=b.offset.top,o=n+c.helperProportions.height,i=c.snapElements.length-1;i>=0;i--){var j=c.snapElements[i].left,l=j+c.snapElements[i].width,k=c.snapElements[i].top,m=k+c.snapElements[i].height;if(j-e<h&&h<l+e&&k-e<n&&n<m+e||j-e<h&&h<l+e&&k-e<o&&o<m+e||j-e<g&&g<l+e&&k-e<n&&n<m+e||j-e<g&&g<l+e&&k-e<o&&
o<m+e){if(f.snapMode!="inner"){var p=Math.abs(k-o)<=e,q=Math.abs(m-n)<=e,r=Math.abs(j-g)<=e,s=Math.abs(l-h)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:k-c.helperProportions.height,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:m,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:j-c.helperProportions.width}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:l}).left-c.margins.left}var t=
p||q||r||s;if(f.snapMode!="outer"){p=Math.abs(k-n)<=e;q=Math.abs(m-o)<=e;r=Math.abs(j-h)<=e;s=Math.abs(l-g)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:k,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:m-c.helperProportions.height,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:j}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:l-c.helperProportions.width}).left-c.margins.left}if(!c.snapElements[i].snapping&&
(p||q||r||s||t))c.options.snap.snap&&c.options.snap.snap.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[i].item}));c.snapElements[i].snapping=p||q||r||s||t}else{c.snapElements[i].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[i].item}));c.snapElements[i].snapping=false}}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options;a=d.makeArray(d(a.stack)).sort(function(c,f){return(parseInt(d(c).css("zIndex"),
10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(a.length){var b=parseInt(a[0].style.zIndex)||0;d(a).each(function(c){this.style.zIndex=b+c});this[0].style.zIndex=b+a.length}}});d.ui.plugin.add("draggable","zIndex",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("zIndex"))b._zIndex=a.css("zIndex");a.css("zIndex",b.zIndex)},stop:function(a,b){a=d(this).data("draggable").options;a._zIndex&&d(b.helper).css("zIndex",a._zIndex)}})})(jQuery);
(function(d){var e=0;d.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,b=this.element[0].ownerDocument,g;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!(a.options.disabled||a.element.propAttr("readOnly"))){g=
false;var f=d.ui.keyCode;switch(c.keyCode){case f.PAGE_UP:a._move("previousPage",c);break;case f.PAGE_DOWN:a._move("nextPage",c);break;case f.UP:a._move("previous",c);c.preventDefault();break;case f.DOWN:a._move("next",c);c.preventDefault();break;case f.ENTER:case f.NUMPAD_ENTER:if(a.menu.active){g=true;c.preventDefault()}case f.TAB:if(!a.menu.active)return;a.menu.select(c);break;case f.ESCAPE:a.element.val(a.term);a.close(c);break;default:clearTimeout(a.searching);a.searching=setTimeout(function(){if(a.term!=
a.element.val()){a.selectedItem=null;a.search(null,c)}},a.options.delay);break}}}).bind("keypress.autocomplete",function(c){if(g){g=false;c.preventDefault()}}).bind("focus.autocomplete",function(){if(!a.options.disabled){a.selectedItem=null;a.previous=a.element.val()}}).bind("blur.autocomplete",function(c){if(!a.options.disabled){clearTimeout(a.searching);a.closing=setTimeout(function(){a.close(c);a._change(c)},150)}});this._initSource();this.response=function(){return a._response.apply(a,arguments)};
this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||"body",b)[0]).mousedown(function(c){var f=a.menu.element[0];d(c.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(h){h.target!==a.element[0]&&h.target!==f&&!d.ui.contains(f,h.target)&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(c,f){f=f.item.data("item.autocomplete");false!==a._trigger("focus",c,{item:f})&&/^key/.test(c.originalEvent.type)&&
a.element.val(f.value)},selected:function(c,f){var h=f.item.data("item.autocomplete"),i=a.previous;if(a.element[0]!==b.activeElement){a.element.focus();a.previous=i;setTimeout(function(){a.previous=i;a.selectedItem=h},1)}false!==a._trigger("select",c,{item:h})&&a.element.val(h.value);a.term=a.element.val();a.close(c);a.selectedItem=h},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");
d.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);a==="source"&&this._initSource();if(a==="appendTo")this.menu.element.appendTo(d(b||"body",this.element[0].ownerDocument)[0]);a==="disabled"&&
b&&this.xhr&&this.xhr.abort()},_initSource:function(){var a=this,b,g;if(d.isArray(this.options.source)){b=this.options.source;this.source=function(c,f){f(d.ui.autocomplete.filter(b,c.term))}}else if(typeof this.options.source==="string"){g=this.options.source;this.source=function(c,f){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:g,data:c,dataType:"json",autocompleteRequest:++e,success:function(h){this.autocompleteRequest===e&&f(h)},error:function(){this.autocompleteRequest===e&&f([])}})}}else this.source=
this.options.source},search:function(a,b){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)!==false)return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){if(!this.options.disabled&&a&&a.length){a=this._normalize(a);this._suggest(a);this._trigger("open")}else this.close();
this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",a)}},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){if(a.length&&a[0].label&&a[0].value)return a;return d.map(a,function(b){if(typeof b==="string")return{label:b,value:b};return d.extend({label:b.label||
b.value,value:b.value||b.label},b)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,a);this.menu.deactivate();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new d.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(a,b){var g=this;
d.each(b,function(c,f){g._renderItem(a,f)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term);this.menu.deactivate()}else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
"\\$&")},filter:function(a,b){var g=new RegExp(d.ui.autocomplete.escapeRegex(b),"i");return d.grep(a,function(c){return g.test(c.label||c.value||c)})}})})(jQuery);(function(d){d.widget("ui.menu",{_create:function(){var e=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(a){if(d(a.target).closest(".ui-menu-item a").length){a.preventDefault();e.select(a)}});this.refresh()},refresh:function(){var e=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(a){e.activate(a,d(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(e,a){this.deactivate();if(this.hasScroll()){var b=a.offset().top-this.element.offset().top,g=this.element.scrollTop(),c=this.element.height();if(b<0)this.element.scrollTop(g+b);else b>=c&&this.element.scrollTop(g+b-c+a.height())}this.active=a.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",e,{item:a})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");
this._trigger("blur");this.active=null}},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,a,b){if(this.active){e=this.active[e+"All"](".ui-menu-item").eq(0);e.length?this.activate(b,e):this.activate(b,this.element.children(a))}else this.activate(b,
this.element.children(a))},nextPage:function(e){if(this.hasScroll())if(!this.active||this.last())this.activate(e,this.element.children(".ui-menu-item:first"));else{var a=this.active.offset().top,b=this.element.height(),g=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a-b+d(this).height();return c<10&&c>-10});g.length||(g=this.element.children(".ui-menu-item:last"));this.activate(e,g)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||
this.last()?":first":":last"))},previousPage:function(e){if(this.hasScroll())if(!this.active||this.first())this.activate(e,this.element.children(".ui-menu-item:last"));else{var a=this.active.offset().top,b=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var g=d(this).offset().top-a+b-d(this).height();return g<10&&g>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(e,result)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||
this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[d.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})})(jQuery);(function(b){var h,i,j,g,l=function(){var a=b(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},k=function(a){var c=a.name,e=a.form,f=b([]);if(c)f=e?b(e).find("[name='"+c+"']"):b("[name='"+c+"']",a.ownerDocument).filter(function(){return!this.form});return f};b.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",l);if(typeof this.options.disabled!==
"boolean")this.options.disabled=this.element.propAttr("disabled");this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var a=this,c=this.options,e=this.type==="checkbox"||this.type==="radio",f="ui-state-hover"+(!e?" ui-state-active":"");if(c.label===null)c.label=this.buttonElement.html();if(this.element.is(":disabled"))c.disabled=true;this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){if(!c.disabled){b(this).addClass("ui-state-hover");
this===h&&b(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){c.disabled||b(this).removeClass(f)}).bind("click.button",function(d){if(c.disabled){d.preventDefault();d.stopImmediatePropagation()}});this.element.bind("focus.button",function(){a.buttonElement.addClass("ui-state-focus")}).bind("blur.button",function(){a.buttonElement.removeClass("ui-state-focus")});if(e){this.element.bind("change.button",function(){g||a.refresh()});this.buttonElement.bind("mousedown.button",function(d){if(!c.disabled){g=
false;i=d.pageX;j=d.pageY}}).bind("mouseup.button",function(d){if(!c.disabled)if(i!==d.pageX||j!==d.pageY)g=true})}if(this.type==="checkbox")this.buttonElement.bind("click.button",function(){if(c.disabled||g)return false;b(this).toggleClass("ui-state-active");a.buttonElement.attr("aria-pressed",a.element[0].checked)});else if(this.type==="radio")this.buttonElement.bind("click.button",function(){if(c.disabled||g)return false;b(this).addClass("ui-state-active");a.buttonElement.attr("aria-pressed","true");
var d=a.element[0];k(d).not(d).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")});else{this.buttonElement.bind("mousedown.button",function(){if(c.disabled)return false;b(this).addClass("ui-state-active");h=this;b(document).one("mouseup",function(){h=null})}).bind("mouseup.button",function(){if(c.disabled)return false;b(this).removeClass("ui-state-active")}).bind("keydown.button",function(d){if(c.disabled)return false;if(d.keyCode==b.ui.keyCode.SPACE||
d.keyCode==b.ui.keyCode.ENTER)b(this).addClass("ui-state-active")}).bind("keyup.button",function(){b(this).removeClass("ui-state-active")});this.buttonElement.is("a")&&this.buttonElement.keyup(function(d){d.keyCode===b.ui.keyCode.SPACE&&b(this).click()})}this._setOption("disabled",c.disabled);this._resetButton()},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if(this.type==="checkbox"||this.type===
"radio"){var a=this.element.parents().filter(":last"),c="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(c);if(!this.buttonElement.length){a=a.length?a.siblings():this.element.siblings();this.buttonElement=a.filter(c);if(!this.buttonElement.length)this.buttonElement=a.find(c)}this.element.addClass("ui-helper-hidden-accessible");(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",a)}else this.buttonElement=this.element},
widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title");
b.Widget.prototype.destroy.call(this)},_setOption:function(a,c){b.Widget.prototype._setOption.apply(this,arguments);if(a==="disabled")c?this.element.propAttr("disabled",true):this.element.propAttr("disabled",false);else this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);if(this.type==="radio")k(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")});else if(this.type==="checkbox")this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")},_resetButton:function(){if(this.type==="input")this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=b("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),e=this.options.icons,f=e.primary&&e.secondary,d=[];if(e.primary||e.secondary){if(this.options.text)d.push("ui-button-text-icon"+(f?"s":e.primary?"-primary":"-secondary"));e.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+e.primary+"'></span>");e.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+e.secondary+"'></span>");if(!this.options.text){d.push(f?"ui-button-icons-only":
"ui-button-icon-only");this.hasTitle||a.attr("title",c)}}else d.push("ui-button-text-only");a.addClass(d.join(" "))}}});b.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,c){a==="disabled"&&this.buttons.button("option",a,c);b.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var a=this.element.css("direction")===
"ltr";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(a?"ui-corner-right":"ui-corner-left").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
b.Widget.prototype.destroy.call(this)}})})(jQuery);(function(d,p){function u(){return++v}function w(){return++x}var v=0,x=0;d.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(b,e){if(b=="selected")this.options.collapsible&&
e==this.options.selected||this.select(e);else{this.options[b]=e;this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+u()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+w());return d.cookie.apply(null,[b].concat(d.makeArray(arguments)))},_ui:function(b,e){return{tab:b,panel:e,index:this.anchors.index(b)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=
d(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(b){function e(g,f){g.css("display","");!d.support.opacity&&f.opacity&&g[0].style.removeAttribute("filter")}var a=this,c=this.options,h=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=d(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return d("a",this)[0]});this.panels=d([]);this.anchors.each(function(g,f){var i=d(f).attr("href"),l=i.split("#")[0],q;if(l&&(l===location.toString().split("#")[0]||
(q=d("base")[0])&&l===q.href)){i=f.hash;f.href=i}if(h.test(i))a.panels=a.panels.add(a.element.find(a._sanitizeSelector(i)));else if(i&&i!=="#"){d.data(f,"href.tabs",i);d.data(f,"load.tabs",i.replace(/#.*$/,""));i=a._tabId(f);f.href="#"+i;f=a.element.find("#"+i);if(!f.length){f=d(c.panelTemplate).attr("id",i).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(a.panels[g-1]||a.list);f.data("destroy.tabs",true)}a.panels=a.panels.add(f)}else c.disabled.push(g)});if(b){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(c.selected===p){location.hash&&this.anchors.each(function(g,f){if(f.hash==location.hash){c.selected=g;return false}});if(typeof c.selected!=="number"&&c.cookie)c.selected=parseInt(a._cookie(),10);if(typeof c.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length)c.selected=
this.lis.index(this.lis.filter(".ui-tabs-selected"));c.selected=c.selected||(this.lis.length?0:-1)}else if(c.selected===null)c.selected=-1;c.selected=c.selected>=0&&this.anchors[c.selected]||c.selected<0?c.selected:0;c.disabled=d.unique(c.disabled.concat(d.map(this.lis.filter(".ui-state-disabled"),function(g){return a.lis.index(g)}))).sort();d.inArray(c.selected,c.disabled)!=-1&&c.disabled.splice(d.inArray(c.selected,c.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");
if(c.selected>=0&&this.anchors.length){a.element.find(a._sanitizeSelector(a.anchors[c.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(c.selected).addClass("ui-tabs-selected ui-state-active");a.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[c.selected],a.element.find(a._sanitizeSelector(a.anchors[c.selected].hash))[0]))});this.load(c.selected)}d(window).bind("unload",function(){a.lis.add(a.anchors).unbind(".tabs");a.lis=a.anchors=a.panels=null})}else c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
this.element[c.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");c.cookie&&this._cookie(c.selected,c.cookie);b=0;for(var j;j=this.lis[b];b++)d(j)[d.inArray(b,c.disabled)!=-1&&!d(j).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");c.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(c.event!=="mouseover"){var k=function(g,f){f.is(":not(.ui-state-disabled)")&&f.addClass("ui-state-"+g)},n=function(g,f){f.removeClass("ui-state-"+
g)};this.lis.bind("mouseover.tabs",function(){k("hover",d(this))});this.lis.bind("mouseout.tabs",function(){n("hover",d(this))});this.anchors.bind("focus.tabs",function(){k("focus",d(this).closest("li"))});this.anchors.bind("blur.tabs",function(){n("focus",d(this).closest("li"))})}var m,o;if(c.fx)if(d.isArray(c.fx)){m=c.fx[0];o=c.fx[1]}else m=o=c.fx;var r=o?function(g,f){d(g).closest("li").addClass("ui-tabs-selected ui-state-active");f.hide().removeClass("ui-tabs-hide").animate(o,o.duration||"normal",
function(){e(f,o);a._trigger("show",null,a._ui(g,f[0]))})}:function(g,f){d(g).closest("li").addClass("ui-tabs-selected ui-state-active");f.removeClass("ui-tabs-hide");a._trigger("show",null,a._ui(g,f[0]))},s=m?function(g,f){f.animate(m,m.duration||"normal",function(){a.lis.removeClass("ui-tabs-selected ui-state-active");f.addClass("ui-tabs-hide");e(f,m);a.element.dequeue("tabs")})}:function(g,f){a.lis.removeClass("ui-tabs-selected ui-state-active");f.addClass("ui-tabs-hide");a.element.dequeue("tabs")};
this.anchors.bind(c.event+".tabs",function(){var g=this,f=d(g).closest("li"),i=a.panels.filter(":not(.ui-tabs-hide)"),l=a.element.find(a._sanitizeSelector(g.hash));if(f.hasClass("ui-tabs-selected")&&!c.collapsible||f.hasClass("ui-state-disabled")||f.hasClass("ui-state-processing")||a.panels.filter(":animated").length||a._trigger("select",null,a._ui(this,l[0]))===false){this.blur();return false}c.selected=a.anchors.index(this);a.abort();if(c.collapsible)if(f.hasClass("ui-tabs-selected")){c.selected=
-1;c.cookie&&a._cookie(c.selected,c.cookie);a.element.queue("tabs",function(){s(g,i)}).dequeue("tabs");this.blur();return false}else if(!i.length){c.cookie&&a._cookie(c.selected,c.cookie);a.element.queue("tabs",function(){r(g,l)});a.load(a.anchors.index(this));this.blur();return false}c.cookie&&a._cookie(c.selected,c.cookie);if(l.length){i.length&&a.element.queue("tabs",function(){s(g,i)});a.element.queue("tabs",function(){r(g,l)});a.load(a.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";
d.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(b){if(typeof b=="string")b=this.anchors.index(this.anchors.filter("[href$="+b+"]"));return b},destroy:function(){var b=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var e=
d.data(this,"href.tabs");if(e)this.href=e;var a=d(this).unbind(".tabs");d.each(["href","load","cache"],function(c,h){a.removeData(h+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){d.data(this,"destroy.tabs")?d(this).remove():d(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});b.cookie&&this._cookie(null,b.cookie);return this},add:function(b,
e,a){if(a===p)a=this.anchors.length;var c=this,h=this.options;e=d(h.tabTemplate.replace(/#\{href\}/g,b).replace(/#\{label\}/g,e));b=!b.indexOf("#")?b.replace("#",""):this._tabId(d("a",e)[0]);e.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var j=c.element.find("#"+b);j.length||(j=d(h.panelTemplate).attr("id",b).data("destroy.tabs",true));j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(a>=this.lis.length){e.appendTo(this.list);j.appendTo(this.list[0].parentNode)}else{e.insertBefore(this.lis[a]);
j.insertBefore(this.panels[a])}h.disabled=d.map(h.disabled,function(k){return k>=a?++k:k});this._tabify();if(this.anchors.length==1){h.selected=0;e.addClass("ui-tabs-selected ui-state-active");j.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){c._trigger("show",null,c._ui(c.anchors[0],c.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[a],this.panels[a]));return this},remove:function(b){b=this._getIndex(b);var e=this.options,a=this.lis.eq(b).remove(),c=this.panels.eq(b).remove();
if(a.hasClass("ui-tabs-selected")&&this.anchors.length>1)this.select(b+(b+1<this.anchors.length?1:-1));e.disabled=d.map(d.grep(e.disabled,function(h){return h!=b}),function(h){return h>=b?--h:h});this._tabify();this._trigger("remove",null,this._ui(a.find("a")[0],c[0]));return this},enable:function(b){b=this._getIndex(b);var e=this.options;if(d.inArray(b,e.disabled)!=-1){this.lis.eq(b).removeClass("ui-state-disabled");e.disabled=d.grep(e.disabled,function(a){return a!=b});this._trigger("enable",null,
this._ui(this.anchors[b],this.panels[b]));return this}},disable:function(b){b=this._getIndex(b);var e=this.options;if(b!=e.selected){this.lis.eq(b).addClass("ui-state-disabled");e.disabled.push(b);e.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[b],this.panels[b]))}return this},select:function(b){b=this._getIndex(b);if(b==-1)if(this.options.collapsible&&this.options.selected!=-1)b=this.options.selected;else return this;this.anchors.eq(b).trigger(this.options.event+".tabs");return this},
load:function(b){b=this._getIndex(b);var e=this,a=this.options,c=this.anchors.eq(b)[0],h=d.data(c,"load.tabs");this.abort();if(!h||this.element.queue("tabs").length!==0&&d.data(c,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(b).addClass("ui-state-processing");if(a.spinner){var j=d("span",c);j.data("label.tabs",j.html()).html(a.spinner)}this.xhr=d.ajax(d.extend({},a.ajaxOptions,{url:h,success:function(k,n){e.element.find(e._sanitizeSelector(c.hash)).html(k);e._cleanup();a.cache&&d.data(c,
"cache.tabs",true);e._trigger("load",null,e._ui(e.anchors[b],e.panels[b]));try{a.ajaxOptions.success(k,n)}catch(m){}},error:function(k,n){e._cleanup();e._trigger("load",null,e._ui(e.anchors[b],e.panels[b]));try{a.ajaxOptions.error(k,n,b,c)}catch(m){}}}));e.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},
url:function(b,e){this.anchors.eq(b).removeData("cache.tabs").data("load.tabs",e);return this},length:function(){return this.anchors.length}});d.extend(d.ui.tabs,{version:"1.8.16"});d.extend(d.ui.tabs.prototype,{rotation:null,rotate:function(b,e){var a=this,c=this.options,h=a._rotate||(a._rotate=function(j){clearTimeout(a.rotation);a.rotation=setTimeout(function(){var k=c.selected;a.select(++k<a.anchors.length?k:0)},b);j&&j.stopPropagation()});e=a._unrotate||(a._unrotate=!e?function(j){j.clientX&&
a.rotate(null)}:function(){t=c.selected;h()});if(b){this.element.bind("tabsshow",h);this.anchors.bind(c.event+".tabs",e);h()}else{clearTimeout(a.rotation);this.element.unbind("tabsshow",h);this.anchors.unbind(c.event+".tabs",e);delete this._rotate;delete this._unrotate}return this}})})(jQuery);jQuery.cookie=function(e,b,a){if(arguments.length>1&&String(b)!=="[object Object]"){a=jQuery.extend({},a);if(b===null||b===void 0)a.expires=-1;if(typeof a.expires==="number"){var d=a.expires,c=a.expires=new Date;c.setDate(c.getDate()+d)}b=String(b);return document.cookie=[encodeURIComponent(e),"=",a.raw?b:encodeURIComponent(b),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}a=b||{};c=a.raw?function(a){return a}:
decodeURIComponent;return(d=RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?c(d[1]):null};Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,c)};"undefined"===typeof Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180});"undefined"===typeof Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return this*Math.PI/180}); var nodeshot={nodes:[],status_choices:{a:"active",h:"hotspot",p:"potential",ah:"hotspot"},url:{index:"",media:""},searchCache:[],init:function(){nodeshot.getNodes();nodeshot.layout.cacheObjects();nodeshot.layout.initSideControl();nodeshot.gmap.init();nodeshot.remember();nodeshot.layout.initSearchAddress();nodeshot.layout.initMainSearch();nodeshot.layout.initAddNode();nodeshot.layout.initChoices();nodeshot.layout.initPotential();nodeshot.layout.initLinkQuality();nodeshot.easterEgg()},getNodes:function(){$.getJSON(nodeshot.url.index+ "nodes.json",function(a){nodeshot.nodes=a})},remember:function(){if($.cookie("nodeshot_potential_nodes")=="false")nodeshot.layout.$potential[0].checked=false;switch($.cookie("nodeshot_link_quality")){case "dbm":$("#dbm")[0].checked=true;break;case "etx":$("#etx")[0].checked=true;break;case "nometric":$("#nometric")[0].checked=true}$.cookie("nodeshot_sidebar")=="false"&&nodeshot.layout.$hideSide.trigger("click");nodeshot.distance.cookie=$.cookie("nodeshot_saved_distances");if(nodeshot.distance.cookie){nodeshot.distance.saved_links= JSON.parse(nodeshot.distance.cookie);if(typeof nodeshot.distance.saved_links=="object"){len=nodeshot.distance.saved_links.length+1;ilen=len-1;if(len>0)for(;--len;)nodeshot.gmap.drawDistanceLink(nodeshot.distance.saved_links[ilen-len],"saved")}}},layout:{cacheObjects:function(){this.$body=$("body");this.$mask=$("#nodeshot-mask");this.$loading=$("#loading");this.$container=$("#container");this.$header=$("#header");this.$content=$("#content");this.$aside=$("#aside");this.$nodeTreeContainer=$("#node-tree-container"); this.$nodeTree=$("#node-tree");this.$hideSide=$("#hide-side");this.$search=$("#search");this.$addNode=$("#addnode");this.$choices=$("#choices");this.$potential=$("#potential");this.$linkQuality=$("#link-quality")},setFullScreen:function(){var a=$(window);if(a.width()>950){this.$container.width(a.width());this.$header.width(a.width());if(nodeshot.layout.$aside.hidden)this.$content.width(a.width());else{this.$content.width(a.width()-295);this.$aside.width("295")}}this.$map?this.$map.height(a.height()- this.$header.height()):this.$infoWrapper&&this.$infoWrapper.height(a.height()-this.$header.height());a=this.$container.height()-this.$header.height()-this.$nodeTreeContainer.position().top;a>100&&this.$nodeTreeContainer.height(a)},setElementDimensions:function(){this.$header.css({position:"absolute",top:0,left:0});this.$content.css({position:"absolute",marginTop:this.$header.height(),left:0});this.$aside.css({marginTop:this.$header.height()})},getCssInt:function(a){if(a){a=a.replace("px","");a=a.replace("em", "");a.replace("%","");integer=parseInt(a)}else integer=0;return integer},horizontalCenter:function(a){if(a){var b=this.getCssInt(a.css("padding-left")),c=this.getCssInt(a.css("padding-right")),d=this.getCssInt(a.css("border-left-width")),e=this.getCssInt(a.css("border-right-width"));width=a.width()+b+c+d+e;return($(window).width()-width)/2}},verticalCenter:function(a){if(a){var b=this.getCssInt(a.css("padding-top")),c=this.getCssInt(a.css("padding-bottom")),d=this.getCssInt(a.css("border-top-width")), e=this.getCssInt(a.css("border-bottom-width"));height=a.height()+b+c+d+e;return($(window).height()-height)/2}},bindFocusBlur:function(a){a.focus(function(){a.val()==a[0].defaultValue&&a.val("")});a.blur(function(){$(this).val()==""&&$(this).val(a[0].defaultValue)})},initSearchAddress:function(){$("#search-address").click(function(a){a.preventDefault();nodeshot.gmap.infoWindow&&nodeshot.gmap.infoWindow.close();nodeshot.overlay.showMask();nodeshot.overlay.open('<div id="nodeshot-overlay-inner" class="content narrower"><div id="gmap-search"><h3>'+ i18n.SEARCH_ADDRESS+"</h3><p>"+i18n.SEARCH_HINT+'</p><p><input type="text" class="text" id="gmap-address" /><input class="button" type="submit" value="'+i18n.SEARCH+'" id="gmap-submit" /></p></div></div>',false,nodeshot.gmap.removeNewMarker);var b=$("#gmap-address");b.trigger("focus");b.bind("keyup",function(a){(a.keyCode?a.keyCode:a.which)==13&&b.val()!=""?nodeshot.gmap.searchAddress(b.val(),b):b.hasClass("error")&&b.removeClass("error")});$("#gmap-submit").click(function(){nodeshot.gmap.searchAddress(b.val(), b)})})},initSideControl:function(){this.$body.append('<a id="show-column"></a>');this.$showColumn=$("#show-column");this.$hideSide.click(function(a){a.preventDefault();nodeshot.layout.$body.css("overflow","hidden");nodeshot.layout.$aside.css({right:0,position:"absolute"});nodeshot.layout.$aside.animate({right:-300},500,function(){nodeshot.layout.$aside.hide();nodeshot.layout.$aside.hidden=true;nodeshot.layout.$showColumn.show(500)});nodeshot.layout.$content.animate({width:nodeshot.layout.$header.width()}, 500);setTimeout(function(){nodeshot.layout.setFullScreen();nodeshot.layout.$body.css("overflow","auto")},600);$.cookie("nodeshot_sidebar","false",{expires:365,path:nodeshot.url.index})});this.$showColumn.css("opacity",0.5).hover(function(){nodeshot.layout.$showColumn.fadeTo(250,1)},function(){nodeshot.layout.$aside.hidden&&nodeshot.layout.$showColumn.fadeTo(250,0.5)}).click(function(){nodeshot.layout.$body.css("overflow","hidden");nodeshot.layout.$aside.show().animate({right:0},function(){nodeshot.layout.$aside.hidden= false;nodeshot.layout.$aside.css("position","static")});nodeshot.layout.$content.animate({width:$(window).width()-295});nodeshot.layout.$showColumn.hide(500);setTimeout(function(){nodeshot.layout.setFullScreen();nodeshot.layout.$body.css("overflow","auto")},600);$.cookie("nodeshot_sidebar","true",{expires:365,path:nodeshot.url.index})})},initMainSearch:function(){this.bindFocusBlur(this.$search);this.$search.autocomplete({minLength:3,source:function(a,b){var c=a.term;c in nodeshot.searchCache?b(nodeshot.searchCache[c]): lastXhr=$.getJSON(nodeshot.url.index+"search/"+a.term+"/",function(a,e,f){if(f===lastXhr&&a!=null&&a.length>0){nodeshot.searchCache[c]=a;b(a)}else{nodeshot.searchCache[c]="";b("")}})},select:function(a,b){var c=nodeshot.layout.$choices.find("input:checked").val();if(c=="map")nodeshot.gmap.goToNode(nodeshot.nodes[nodeshot.status_choices[b.item.status]][b.item.value]);else if(c=="info")nodeshot.infoTab.scrollTo(b.item.slug);else return false;$(this).val(b.item.label);return false},focus:function(a, b){$(this).val(b.item.label);return false}})},initAddNode:function(){var a=nodeshot.layout.$addNode,b=a.find("span.maponly");this.$addNode.click(function(){if(b.text()!=i18n.ADDNODE_CANCEL){a.blur();i18n.ADDNODE=b.text();nodeshot.dialog.open(i18n.ADDNODE_DIALOG,function(){b.text(i18n.ADDNODE_CANCEL)});nodeshot.gmap.clickListener=google.maps.event.addListener(nodeshot.gmap.map,"click",function(a){nodeshot.gmap.newNodeMarker(a.latLng)})}else nodeshot.node.cancelAdd()})},initChoices:function(){this.$choices.buttonset(); document.getElementById("radio1").checked=true;document.getElementById("radio2").checked=false;if(document.getElementById("radio3"))document.getElementById("radio3").checked=false;if(document.getElementById("radio4"))document.getElementById("radio4").checked=false;this.$choices.buttonset("refresh");this.$choices.find("input").change(function(){var a=this.value;if(a!="map"&&!nodeshot.layout.$aside.maponly){nodeshot.layout.$aside.find("#addnode, .maponly").fadeOut(500);nodeshot.layout.$aside.maponly= true}if(a=="map"){if(nodeshot.layout.$aside.maponly){nodeshot.layout.$aside.find("#addnode, .maponly").fadeIn(500);delete nodeshot.layout.$aside.maponly}nodeshot.layout.$infoTable&&nodeshot.infoTab.unload();nodeshot.overlay.showMask(0.7);nodeshot.overlay.showLoading();nodeshot.layout.$content.html('<div id="map_canvas"></div><div id="side-links"></div>');nodeshot.gmap.init();nodeshot.remember();nodeshot.layout.setFullScreen();nodeshot.overlay.hideLoading();nodeshot.overlay.hideMask()}else if(a=="info"){nodeshot.layout.$map&& nodeshot.gmap.unload();nodeshot.overlay.showMask(0.7);nodeshot.overlay.showLoading();nodeshot.layout.$content.load(nodeshot.url.index+"overview/",function(){nodeshot.infoTab.init();nodeshot.layout.setFullScreen();nodeshot.overlay.hideMask();nodeshot.overlay.hideLoading()})}else if(a=="tab3"||a=="tab4"){nodeshot.overlay.showMask(0.7);nodeshot.overlay.showLoading();nodeshot.layout.$map&&nodeshot.gmap.unload();nodeshot.layout.$infoTable&&nodeshot.infoTab.unload();nodeshot.layout.$content.load(nodeshot.url.index+ a+"/",function(){nodeshot.layout.setFullScreen();nodeshot.overlay.hideMask();nodeshot.overlay.hideLoading()})}})},initLinkQuality:function(){nodeshot.layout.$linkQuality.find("input").change(function(){$.cookie("nodeshot_link_quality",this.id,{expires:365,path:nodeshot.url.index});nodeshot.gmap.removeMarkers("active");nodeshot.gmap.drawNodes("active")})},initPotential:function(){nodeshot.layout.$potential.change(function(){if(this.checked){$.cookie("nodeshot_potential_nodes","true",{expires:365,path:nodeshot.url.index}); nodeshot.gmap.drawNodes(nodeshot.status_choices.p)}else{$.cookie("nodeshot_potential_nodes","false",{expires:365,path:nodeshot.url.index});nodeshot.gmap.removeMarkers(nodeshot.status_choices.p)}})},initNodeTree:function(){this.$nodeTree.jstree({json_data:{ajax:{url:nodeshot.url.index+"jstree.json",data:function(a){return{id:a.attr?a.attr("id"):0}}}},themes:{theme:"classic"},plugins:["themes","json_data"]})}},overlay:{showMask:function(a,b){a||(a=0.5);var c=nodeshot.layout.$mask;c.css({opacity:0,display:"block"}).animate({opacity:a}, 500);b&&c.click(function(){nodeshot.overlay.hideMask();nodeshot.layout.$dialog&&nodeshot.dialog.close()})},hideMask:function(){nodeshot.layout.$mask.fadeOut(500)},showLoading:function(){nodeshot.layout.$loading.show()},hideLoading:function(){nodeshot.layout.$loading.hide()},open:function(a,b,c){this.hideLoading();nodeshot.layout.$overlay&&nodeshot.layout.$overlay.remove();nodeshot.layout.$body.append('<div id="nodeshot-overlay"></div>');nodeshot.layout.$overlay=$("#nodeshot-overlay");nodeshot.layout.$overlay.html(a); nodeshot.layout.$overlayInner=$("#nodeshot-overlay-inner");this.initClose(c);this.centerVertically();nodeshot.layout.setFullScreen();if(b){nodeshot.layout.$overlay.click(function(){nodeshot.overlay.close(c)});nodeshot.layout.$overlayInner.click(function(){return false})}},initClose:function(a){nodeshot.layout.$overlayInner.prepend('<a class="close"></a>');nodeshot.layout.$overlayInner.find(".close").click(function(){nodeshot.overlay.close(a)});$("#cancel").click(function(){nodeshot.overlay.close(a)})}, centerVertically:function(a,b){var c=nodeshot.layout.verticalCenter(nodeshot.layout.$overlayInner);c<0&&(c=10);a?nodeshot.layout.$overlayInner.animate({"margin-top":c},b):nodeshot.layout.$overlayInner.css("margin-top",c)},bindSubmitForm:function(a){$("#nodeshot-form").submit(function(b){form=$(this);b.preventDefault();if(!nodeshot.sending){a(form);nodeshot.sending=true}})},close:function(a){nodeshot.overlay.hideMask();nodeshot.layout.$overlay.remove();nodeshot.layout.$overlay=false;nodeshot.layout.$overlayInner= false;nodeshot.layout.setFullScreen();if(nodeshot.gmap.clickListener){google.maps.event.removeListener(nodeshot.gmap.clickListener);nodeshot.gmap.clickListener=null}nodeshot.gmap.addressMarker&&nodeshot.gmap.removeAddressMarker();a&&a()}},dialog:{open:function(a,b){$("body").append('<div id="nodeshot-modal"><div id="nodeshot-modal-message">'+a+'</div><a class="button green" id="nodeshot-modal-close">'+i18n.OK+"</a></div>");nodeshot.layout.$dialog=$("#nodeshot-modal");nodeshot.overlay.showMask(0.5, true);nodeshot.layout.$dialog.css({opacity:0,display:"block",left:nodeshot.layout.horizontalCenter(nodeshot.layout.$dialog),top:nodeshot.layout.verticalCenter(nodeshot.layout.$dialog)}).animate({opacity:1},500);setTimeout(function(){$(document).bind("keyup",function(a){a=a.keyCode?a.keyCode:a.which;(a==13||a==27)&&nodeshot.dialog.close(b)})},500);$("#nodeshot-modal-close").click(function(){nodeshot.dialog.close(b)})},close:function(a){nodeshot.layout.$dialog&&nodeshot.layout.$dialog.fadeOut(500,function(){nodeshot.layout.$dialog.remove(); nodeshot.layout.$dialog=false});nodeshot.overlay.hideMask();a&&a();nodeshot.layout.$body.unbind("keyup");$(document).unbind("keyup")}},contact:{init:function(a){nodeshot.overlay.showMask(0.7);nodeshot.overlay.showLoading();$.get(a,function(b){nodeshot.overlay.hideLoading();nodeshot.overlay.open(b);nodeshot.overlay.bindSubmitForm(function(b){nodeshot.contact.submit(a,b)})})},submit:function(a,b){nodeshot.overlay.showLoading();$("#nodeshot-mask").css({zIndex:11,opacity:0.7});nodeshot.layout.$overlay.css("z-index", "10");var c=b.serialize();$.post(a,c,function(b){nodeshot.overlay.hideLoading();if($(b).find("#success").length<1){$("#nodeshot-mask").css({zIndex:10,opacity:0.5});nodeshot.layout.$overlay.css("z-index","11");nodeshot.layout.$overlay.html(b);nodeshot.layout.$overlay=$("#nodeshot-overlay");nodeshot.layout.$overlayInner=$("#nodeshot-overlay-inner");nodeshot.overlay.centerVertically();nodeshot.overlay.initClose();nodeshot.overlay.bindSubmitForm(function(b){nodeshot.contact.submit(a,b)})}else $("#nodeshot-overlay-inner").fadeOut(500, function(){nodeshot.dialog.open(i18n.MESSAGE_SENT,nodeshot.overlay.close)});nodeshot.sending=false}).error(function(a,b,c){nodeshot.overlay.hideLoading();a.status==500?alert(i18n.SMTP_ERROR):alert("Error: "+a.status+" "+c);nodeshot.overlay.close()});return false},link:function(){$("#contact-link").click(function(a){a.preventDefault();nodeshot.contact.init(this.href);return false})}},node:{add:function(){nodeshot.overlay.showMask();nodeshot.overlay.showLoading();$.get(nodeshot.url.index+"node/add/", function(a){nodeshot.overlay.open(a,false,nodeshot.node.cancelAdd);if(nodeshot.gmap.newMarker){$("#id_lat").val(nodeshot.gmap.newMarker.getPosition().lat());$("#id_lng").val(nodeshot.gmap.newMarker.getPosition().lng());nodeshot.gmap.removeNewMarker()}nodeshot.overlay.bindSubmitForm(function(a){nodeshot.node.submit(a)})})},cancelAdd:function(){nodeshot.layout.$addNode.find("span.maponly").text(i18n.ADDNODE);nodeshot.gmap.removeNewMarker();google.maps.event.removeListener(nodeshot.gmap.clickListener)}, submit:function(a){nodeshot.overlay.showLoading();$("#nodeshot-mask").css({zIndex:11,opacity:0.7});nodeshot.layout.$overlay.css("z-index","10");a=a.serialize();$.post(nodeshot.url.index+"node/add/",a,function(a){nodeshot.overlay.hideLoading();if(a.length>=10){$("#nodeshot-mask").css({zIndex:10,opacity:0.5});nodeshot.layout.$overlay.css("z-index","11");nodeshot.layout.$overlay.html(a);nodeshot.layout.$overlay=$("#nodeshot-overlay");nodeshot.layout.$overlayInner=$("#nodeshot-overlay-inner");nodeshot.overlay.centerVertically(); nodeshot.overlay.initClose(nodeshot.node.cancelAdd);nodeshot.overlay.bindSubmitForm(function(a){nodeshot.node.submit(a)})}else{nodeshot.layout.$addNode.find("span.maponly").text(i18n.ADDNODE);nodeshot.layout.$overlayInner.fadeOut(500,function(){nodeshot.dialog.open(i18n.THANKYOU_NEWNODE_DIALOG,nodeshot.overlay.close)})}nodeshot.layout.setFullScreen();nodeshot.sending=false}).error(function(a,c,d){nodeshot.overlay.hideLoading();a.status==500?alert(i18n.SMTP_ERROR):alert("Error: "+a.status+" "+d);nodeshot.overlay.close()})}, bindChangePassword:function(){$("#change-password").click(function(){var a=$(this),b=$("#id_new_password");if(a.data("info")==void 0||a.data("info").status==0){a.data("info",{text:a.text(),status:1});a.text(i18n.CANCEL);$("#id_new_password2").val("");$("#id_fake_password").hide();b.val("").show(500);$("#verify-password").show(500)}else{a.text(a.data("info").text);$("#id_new_password2").val("");$("#id_fake_password").show(500);b.val("").hide();$("#verify-password").hide();a.data("info").status=0}}); $("#non-field-errors").length>0&&$("#change-password").click()}},advanced:{init:function(){nodeshot.advanced.firstTimeLoadingTab=true;$("#advanced-info").tabs({fx:{opacity:"toggle",height:"toggle",duration:400},show:function(){if(nodeshot.advanced.firstTimeLoadingTab){nodeshot.overlay.centerVertically();nodeshot.advanced.firstTimeLoadingTab=false}else nodeshot.overlay.centerVertically(true,400)}});for(var a=$(".toggle-info","#advanced-info").toggle(function(){var a=$(this);a.parent().parent().parent().parent().find(".additional").show(300, function(){nodeshot.overlay.centerVertically(true,300)});a.removeClass("green");a.addClass("red");a.text(i18n.LESSINFO)},function(){var a=$(this);a.parent().parent().parent().parent().find(".additional").hide(300,function(){nodeshot.overlay.centerVertically(true,300)});a.removeClass("red");a.addClass("green");a.text(i18n.MOREINFO)}),b=a.length,c=0;c<b;c++)a.eq(c).parent().parent().parent().parent().find(".additional tr").length<1&&a.eq(c).hide()}},azimuth:{calculate:function(a,b,c,d){a=new google.maps.LatLng(a, b);c=new google.maps.LatLng(c,d);c=google.maps.geometry.spherical.computeHeading(a,c);c=Math.round(c*Math.pow(10,5))/Math.pow(10,5);c<0&&(c=360+c);return c}},distance:{links:[],calculate:function(a,b,c,d,e){a=Math.PI*a/180;c=Math.PI*c/180;b=Math.PI*(b-d)/180;b=Math.sin(a)*Math.sin(c)+Math.cos(a)*Math.cos(c)*Math.cos(b);b=Math.acos(b);b=b*180/Math.PI;b=b*69.09;e=="K"&&(b=b*1.609344);e=="N"&&(b=b*0.8684);return b=Math.round(b*Math.pow(10,2))/Math.pow(10,2)},add:function(a,b,c,d,e){a=this.links.push({link:a, from_name:b.from_name,to_name:b.to_name,$div:null,remove:function(){if(nodeshot.distance.saved_links){for(var a=false,b=nodeshot.distance.saved_links.length+1,c=b-1;--b;){var d=nodeshot.distance.saved_links[c-b];if(d&&d.from_name==this.from_name&&d.to_name==this.to_name){nodeshot.distance.saved_links.remove(c-b);a=true}}a&&$.cookie("nodeshot_saved_distances",JSON.stringify(nodeshot.distance.saved_links),{expires:365,path:nodeshot.url.index})}this.link.setMap(null);this.$div.fadeOut(500,this.$div.remove); delete this.link},hide:function(){this.link.setMap(null);this.$div.find(".link-hide").hide();this.$div.find(".link-show").show()},show:function(){this.link.setMap(nodeshot.gmap.map);this.$div.find(".link-show").hide();this.$div.find(".link-hide").show()},save:function(){if(e)return false;this.$div.find(".link-save").fadeOut(500);if(nodeshot.distance.cookie==null)var a=JSON.stringify([b]);else{nodeshot.distance.saved_links.push(b);a=JSON.stringify(nodeshot.distance.saved_links)}$.cookie("nodeshot_saved_distances", a,{expires:365,path:nodeshot.url.index})}});a=a-1;c='<div id="distance-link'+a+'" class="distance-link"><span>'+('<a class="link-node" href="javascript:nodeshot.gmap.goToNode(\''+("nodeshot.nodes."+nodeshot.status_choices[b.from_status]+"."+b.from_slug)+"')\">"+b.from_name+"</a>")+" - "+('<a class="link-node" href="javascript:nodeshot.gmap.goToNode(\''+("nodeshot.nodes."+nodeshot.status_choices[b.to_status]+"."+b.to_slug)+"')\">"+b.to_name+"</a>")+": <b>"+c+' km</b> - <b class="azm">'+d+"\u00b0</b>"; c=c+'<a href="javascript:nodeshot.distance.links['+a+'].show()" class="link-show">'+i18n.SHOW+"</a>";c=c+'<a href="javascript:nodeshot.distance.links['+a+'].hide()" class="link-hide">'+i18n.HIDE+"</a>";e||(c=c+'<a href="javascript:nodeshot.distance.links['+a+'].save()" class="link-save">'+i18n.SAVE+"</a>");c=c+'<a href="javascript:nodeshot.distance.links['+a+'].remove()" class="link-remove">'+i18n.DELETE+"</a>";nodeshot.layout.$sideLinks.prepend(c+"</span></div>");this.links[a].$div=$("#distance-link"+ a);this.links[a].$div.fadeIn(500);nodeshot.layout.setFullScreen()}},gmap:{newMarker:"",newMarkerListener:"",clickListener:"",infoWindow:new google.maps.InfoWindow,init:function(){nodeshot.layout.$map=$("#map_canvas");nodeshot.layout.$sideLinks=$("#side-links");var a=new google.maps.LatLng(nodeshot.gmap.config.lat,nodeshot.gmap.config.lng);nodeshot.gmap.map=new google.maps.Map(document.getElementById("map_canvas"),{center:a,zoom:parseInt(nodeshot.gmap.config.zoom),mapTypeId:google.maps.MapTypeId.ROADMAP}); nodeshot.gmap.geocoder=new google.maps.Geocoder;var b=setInterval(function(){if(nodeshot.nodes.active!=void 0){clearInterval(b);nodeshot.gmap.drawNodes(nodeshot.status_choices.a);nodeshot.gmap.drawNodes(nodeshot.status_choices.h);nodeshot.layout.$potential[0].checked&&nodeshot.gmap.drawNodes(nodeshot.status_choices.p);if(!nodeshot.gmap.config.is_default){var a=nodeshot.gmap.config.node.split(";");nodeshot.gmap.goToNode(nodeshot.nodes[nodeshot.status_choices[a[1]]][a[0]])}}},200);nodeshot.layout.setFullScreen()}, drawNodes:function(a){var b=nodeshot.nodes[a],c=nodeshot.url.media+"images/marker_"+a+".png",d;for(d in b){var e=new google.maps.LatLng(b[d].lat,b[d].lng);b[d].marker=new google.maps.Marker({position:e,map:nodeshot.gmap.map,title:b[d].name,icon:c});b[d].marker.slug=b[d].slug;b[d].marker.setMap(nodeshot.gmap.map);b[d].listener=google.maps.event.addListener(b[d].marker,"click",nodeshot.gmap.clickMarker(b[d].marker,b[d]))}if(a==nodeshot.status_choices.a){a=nodeshot.nodes.links.length+1;b=a-1;for(c=nodeshot.layout.$linkQuality.find("input:checked").val();--a;){d= nodeshot.nodes.links[b-a];d.gmap=nodeshot.gmap.drawLink(d.from_lat,d.from_lng,d.to_lat,d.to_lng,c!="nometric"?d[c]:1,d.retx,d.rdbm)}}},removeMarkers:function(a){for(var b in nodeshot.nodes[a]){nodeshot.nodes[a][b].marker.setMap(null);google.maps.event.removeListener(nodeshot.nodes[a][b].listener);delete nodeshot.nodes[a][b].marker;delete nodeshot.nodes[a][b].listener}a==nodeshot.status_choices.a&&this.removeLinks()},removeLinks:function(){for(var a=nodeshot.nodes.links.length+1,b=a-1;--a;){nodeshot.nodes.links[b- a].gmap.setMap(null);delete nodeshot.nodes.links[b-a].gmap}},goToNode:function(a){typeof a=="string"&&(a=eval(a));nodeshot.gmap.check$potential(nodeshot.status_choices[a.status]);if(a.marker){google.maps.event.trigger(a.marker,"click");nodeshot.gmap.map.panTo(a.marker.getPosition());nodeshot.gmap.map.setZoom(13)}else nodeshot.dialog.open(i18n.NODE_DOESNT_EXIST)},newNodeMarker:function(a){nodeshot.gmap.removeNewMarker();var b=new google.maps.Marker({position:a,map:nodeshot.gmap.map,icon:nodeshot.url.media+ "images/marker_new.png"});nodeshot.gmap.infoWindow=new google.maps.InfoWindow({content:'<div id="confirm-new"><h2>'+i18n.NEWNODE_INFOWINDOW_TITLE+'</h2><a href="javascript:nodeshot.node.add()" class="green">'+i18n.YES+'</a><a href="javascript:nodeshot.gmap.removeNewMarker()" class="red">'+i18n.NO+"</a></div>"});nodeshot.gmap.infoWindow.open(nodeshot.gmap.map,b);nodeshot.gmap.newMarkerListener=google.maps.event.addListener(b,"click",function(){nodeshot.gmap.infoWindow.open(nodeshot.gmap.map,b)});nodeshot.gmap.newMarker= b},removeNewMarker:function(){nodeshot.gmap.newMarker&&nodeshot.gmap.newMarker.setMap(null);nodeshot.gmap.newMarkerListener&&google.maps.event.removeListener(nodeshot.gmap.newMarkerListener);nodeshot.gmap.newMarker=null;nodeshot.gmap.newMarkerListener=null},clickMarker:function(a,b){return function(){nodeshot.layout.$overlay&&nodeshot.overlay.close();nodeshot.overlay.showMask(0.7);nodeshot.overlay.showLoading();$.get(nodeshot.url.index+"node/info/"+b.id+"/",function(c){nodeshot.gmap.infoWindow.domready&& google.maps.event.removeListener(nodeshot.gmap.infoWindow.domready);nodeshot.gmap.infoWindow.domready=google.maps.event.addListener(nodeshot.gmap.infoWindow,"domready",function(){$(".tabs").tabs({create:function(){$this=$(this);nodeshot.tab0Height=$this.find(".ui-tabs-panel").eq($this.tabs("option","selected")).height()},show:function(){$this=$(this);if($this.tabs("option","selected")===1){var a=$this.find(".ui-tabs-panel").eq(1);nodeshot.tab1Height=a.height();nodeshot.tab0Height>nodeshot.tab1Height&& a.height(nodeshot.tab0Height)}},select:function(a,b){if(b.tab.id=="advanced-link"){nodeshot.overlay.showMask(0.8,true);nodeshot.overlay.showLoading();$.get($(b.tab).attr("data-url"),function(a){nodeshot.overlay.open(a,true);nodeshot.advanced.init()});return false}}});nodeshot.contact.link();var a=$("#distance-search");nodeshot.layout.bindFocusBlur(a);a.autocomplete({minLength:3,source:function(a,b){var c=a.term;c in nodeshot.searchCache?b(nodeshot.searchCache[c]):lastXhr=$.getJSON(nodeshot.url.index+ "search/"+a.term+"/",function(a,d,e){if(e===lastXhr&&a!=null&&a.length>0){nodeshot.searchCache[c]=a;b(a)}else{nodeshot.searchCache[c]="";b("")}})},select:function(c,f){nodeshot.gmap.drawDistanceLink({from_name:nodeshot.nodes[nodeshot.status_choices[b.status]][b.jslug].name,from_slug:nodeshot.nodes[nodeshot.status_choices[b.status]][b.jslug].jslug,from_lat:nodeshot.nodes[nodeshot.status_choices[b.status]][b.jslug].lat,from_lng:nodeshot.nodes[nodeshot.status_choices[b.status]][b.jslug].lng,from_status:nodeshot.nodes[nodeshot.status_choices[b.status]][b.jslug].status, to_name:f.item.name,to_slug:f.item.value,to_lat:f.item.lat,to_lng:f.item.lng,to_status:f.item.status});a.val(f.item.label);return false},focus:function(a,b){$(this).val(b.item.label);return false}});$("#distance-select").change(function(){var a=$(this),c=a.val().split(";"),d=c[0].replace(",","."),g=c[1].replace(",","."),i=c[2],c=c[3];nodeshot.gmap.drawDistanceLink({from_name:nodeshot.nodes[nodeshot.status_choices[b.status]][b.jslug].name,from_slug:nodeshot.nodes[nodeshot.status_choices[b.status]][b.jslug].jslug, from_lat:nodeshot.nodes[nodeshot.status_choices[b.status]][b.jslug].lat,from_lng:nodeshot.nodes[nodeshot.status_choices[b.status]][b.jslug].lng,from_status:nodeshot.nodes[nodeshot.status_choices[b.status]][b.jslug].status,to_name:a.find('option[value="'+a.val()+'"]').eq(0).text(),to_slug:i,to_lat:d,to_lng:g,to_status:c})});nodeshot.layout.setFullScreen();setTimeout(function(){nodeshot.layout.setFullScreen()},300)});nodeshot.gmap.infoWindow.setContent(c);nodeshot.gmap.infoWindow.maxWidth=500;nodeshot.gmap.infoWindow.open(nodeshot.gmap.map, a);nodeshot.overlay.hideLoading();nodeshot.layout.$dialog||nodeshot.overlay.hideMask()})}},drawLink:function(a,b,c,d,e,f,h){var g=0.5;e==2?g=0.7:e==3&&(g=0.4);a=new google.maps.LatLng(a,b);c=new google.maps.LatLng(c,d);g=new google.maps.Polyline({path:[a,c],strokeColor:[null,"#00ff00","#fcfd00","#ee0000","#5f0060"][e],strokeOpacity:g,strokeWeight:5});if(e!=4){if(h==0)h=i18n.NOT_AVAILABLE;g.clickListener=google.maps.event.addListener(g,"click",function(a){nodeshot.gmap.infoWindow.setContent("<b>etx</b>: "+ f+"<br /><b>dBm</b>: "+h);nodeshot.gmap.infoWindow.maxWidth=50;nodeshot.gmap.infoWindow.position=a.latLng;nodeshot.gmap.infoWindow.open(nodeshot.gmap.map)})}g.setMap(nodeshot.gmap.map);return g},drawDistanceLink:function(a,b){if(!a)return false;if(a.from_slug==a.to_slug){nodeshot.dialog.open(i18n.DESTINATION_NOTVALID);return false}a.from_lat=parseFloat(a.from_lat);a.from_lng=parseFloat(a.from_lng);a.to_lat=parseFloat(a.to_lat);a.to_lng=parseFloat(a.to_lng);this.check$potential(nodeshot.status_choices[a.from_status]); this.check$potential(nodeshot.status_choices[a.to_status]);var c=nodeshot.gmap.drawLink(a.from_lat,a.from_lng,a.to_lat,a.to_lng,4),d=nodeshot.distance.calculate(a.from_lat,a.from_lng,a.to_lat,a.to_lng,"K"),e=nodeshot.azimuth.calculate(a.from_lat,a.from_lng,a.to_lat,a.to_lng);$("#result").html(d);$("#azimuth").html(e);$("#result-row").fadeIn(500);nodeshot.distance.add(c,a,d,e,b);return true},removeAddressMarker:function(){nodeshot.gmap.addressMarker.setMap(null);delete nodeshot.gmap.addressMarker}, check$potential:function(a){if(a==nodeshot.status_choices.p&&!nodeshot.layout.$potential[0].checked){nodeshot.layout.$potential[0].checked=true;nodeshot.gmap.drawNodes(nodeshot.status_choices.p);$.cookie("nodeshot_potential_nodes","true",{expires:365,path:nodeshot.url.index})}},searchAddress:function(a,b){nodeshot.gmap.geocoder&&nodeshot.gmap.geocoder.geocode({address:a},function(a,d){if(d==google.maps.GeocoderStatus.OK){nodeshot.overlay.hideMask();var e=function(a){a=new google.maps.LatLng(a[0].geometry.location.lat(), a[0].geometry.location.lng());nodeshot.gmap.addressMarker&&nodeshot.gmap.removeAddressMarker();nodeshot.gmap.addressMarker=new google.maps.Marker({position:a,map:nodeshot.gmap.map});nodeshot.gmap.map.panTo(a);nodeshot.gmap.map.setZoom(16)};if(nodeshot.layout.$overlayInner.hasClass("ui-draggable"))e(a);else{nodeshot.layout.$overlayInner.css({top:nodeshot.layout.$overlayInner.css("margin-top"),left:nodeshot.layout.$overlayInner.position().left,position:"absolute",marginTop:0});nodeshot.layout.$overlay.css({width:0, height:0});nodeshot.layout.$overlayInner.animate({top:50,left:80},function(){nodeshot.layout.$overlayInner.draggable();e(a)})}}else b.addClass("error")})},unload:function(){delete nodeshot.layout.$map;delete nodeshot.layout.$sideLinks;this.removeMarkers(nodeshot.status_choices.a);this.removeMarkers(nodeshot.status_choices.h);nodeshot.layout.$potential[0].checked&&this.removeMarkers(nodeshot.status_choices.p);delete nodeshot.gmap.map;delete nodeshot.gmap.geocoder}},infoTab:{init:function(){nodeshot.layout.$infoTable= $("#info-table");nodeshot.layout.$infoWrapper=$("#info-wrapper");nodeshot.layout.$tableWrapper=$("#table-wrapper");nodeshot.layout.$signalbar=$(".signalbar");nodeshot.layout.$body.append('<script src="'+nodeshot.url.media+'js/compressed/overview.js"><\/script>')},init2:function(){nodeshot.layout.$infoTable.tablesorter();len=nodeshot.layout.$signalbar.length+1;for(ilen=len-1;--len;){var a=nodeshot.layout.$signalbar.eq(ilen-len),b=a.attr("data-value");a.progressBar(b,{showText:false,boxImage:nodeshot.url.media+ "/images/progressbar.gif",barImage:{"0":nodeshot.url.media+"/images/progressbg_red.gif",30:nodeshot.url.media+"/images/progressbg_orange.gif",50:nodeshot.url.media+"/images/progressbg_yellow.gif",63:nodeshot.url.media+"/images/progressbg_green.gif",80:nodeshot.url.media+"/images/progressbg_teal.png"}})}},scrollTo:function(a){var b=$("tr."+a);if(b.length>0){a=nodeshot.layout.$tableWrapper.scrollTop()+b.position().top-100;nodeshot.layout.$tableWrapper.animate({scrollTop:a},"slow",function(){var a=b.find("td"); a.css("background-color","#ffffc8");setTimeout(function(){a.css("background-color","#fff")},3E3)})}else setTimeout(function(){nodeshot.dialog.open(i18n.NODE_NOT_IN_LIST)},300)},unload:function(){delete nodeshot.layout.$infoTable;delete nodeshot.layout.$infoWrapper;delete nodeshot.layout.$tableWrapper;delete nodeshot.layout.$signalbar}},easterEgg:function(){var a=[];$(document).keydown(function(b){a.push(b.keyCode);if(a.toString().indexOf("38,38,40,40,37,39,37,39,66,65")>=0){$(document).unbind("keydown", arguments.callee);$.getScript("http://www.cornify.com/js/cornify.js",function(){cornify_add();$(document).keydown(cornify_add)})}})}};